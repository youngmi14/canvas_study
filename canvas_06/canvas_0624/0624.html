<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>canvas test</title>

        <style type="text/css">
            canvas {
                background: #eee;
            }
        </style>
    </head>

    <body>
        <h1>Image</h1>
        <div>그리기</div>
        <canvas id="canvas" class="canvas" width="600" height="400">이 브라우저는 캔버스를 지원하지 않습니다.</canvas>
        <!-- <script type="text/javascript" src="./0621.js"></script> -->

        <script>
            const canvas = document.querySelector('.canvas');
            const ctx = canvas.getContext('2d');
            let drawingMode; // true일 때 그리기

            function clickHandler(e) {
                // console.log(e.layerY); // layer는 client와 다르게 캔버스기준이다.
                // client는 브라우저 기준
                if (!drawingMode) return;

                ctx.beginPath();
                ctx.arc(e.layerX, e.layerY, 10, 0, Math.PI*2, false);
                ctx.fill();
            }

            // canvas.addEventListener('click', clickHandler); // 1

            function downHandler() {
                drawingMode = true;
            }
            function upHandler() {
                drawingMode = false;
            }

            canvas.addEventListener('mousedown', downHandler); //2
            canvas.addEventListener('mousemove', clickHandler); //2
            canvas.addEventListener('mouseup', upHandler); //2
            
        </script>
    </body>
</html>
